<!DOCTYPE html>
<html lang="en"><head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.4.549">

  <meta name="author" content="Fernando Rios-Avila">
  <title>Econometrics MSC Levy - Research Methods II</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #24292e;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #24292e; } /* Normal */
    code span.al { color: #ff5555; font-weight: bold; } /* Alert */
    code span.an { color: #6a737d; } /* Annotation */
    code span.at { color: #d73a49; } /* Attribute */
    code span.bn { color: #005cc5; } /* BaseN */
    code span.bu { color: #d73a49; } /* BuiltIn */
    code span.cf { color: #d73a49; } /* ControlFlow */
    code span.ch { color: #032f62; } /* Char */
    code span.cn { color: #005cc5; } /* Constant */
    code span.co { color: #6a737d; } /* Comment */
    code span.cv { color: #6a737d; } /* CommentVar */
    code span.do { color: #6a737d; } /* Documentation */
    code span.dt { color: #d73a49; } /* DataType */
    code span.dv { color: #005cc5; } /* DecVal */
    code span.er { color: #ff5555; text-decoration: underline; } /* Error */
    code span.ex { color: #d73a49; font-weight: bold; } /* Extension */
    code span.fl { color: #005cc5; } /* Float */
    code span.fu { color: #6f42c1; } /* Function */
    code span.im { color: #032f62; } /* Import */
    code span.in { color: #6a737d; } /* Information */
    code span.kw { color: #d73a49; } /* Keyword */
    code span.op { color: #24292e; } /* Operator */
    code span.ot { color: #6f42c1; } /* Other */
    code span.pp { color: #d73a49; } /* Preprocessor */
    code span.re { color: #6a737d; } /* RegionMarker */
    code span.sc { color: #005cc5; } /* SpecialChar */
    code span.ss { color: #032f62; } /* SpecialString */
    code span.st { color: #032f62; } /* String */
    code span.va { color: #e36209; } /* Variable */
    code span.vs { color: #032f62; } /* VerbatimString */
    code span.wa { color: #ff5555; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto.css">
  <link rel="stylesheet" href="styles.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
  
  <script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Research Methods II</h1>
  <p class="subtitle">Session 7: Micro-Simulations, and Monte Carlo Methods</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Fernando Rios-Avila 
</div>
</div>
</div>

</section>
<section>
<section id="simulation-methods-in-economics" class="title-slide slide level1 center">
<h1>Simulation Methods in Economics</h1>

</section>
<section id="what-is-monte-carlo-simulation" class="slide level2">
<h2>What is Monte Carlo Simulation?</h2>
<ul>
<li><p>Monte Carlo simulation are a generic name given to methods that use random numbers to simulate a process.</p></li>
<li><p>In econometrics, Monte Carlo methods are used to study the properties of estimators, and to evaluate the performance of statistical tests.</p></li>
<li><p>This can be a useful tool to understand some of the properties of estimators, or even problems related to violations of assumptions.</p></li>
<li><p>It can also be used to evaluate the performance of estimators in finite samples, and to compare different estimators.</p></li>
</ul>
</section>
<section id="example-mean-vs-median" class="slide level2 scrollable">
<h2>Example: Mean vs Median</h2>
<ul>
<li>Which of this estimators is more robust and efficient, when samples are small ?</li>
<li>Lets setup a program that would simulate this:</li>
</ul>
<div id="6597105c" class="cell larger" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb1-1"><a></a><span class="co">// define a program</span></span>
<span id="cb1-2"><a></a><span class="kw">capture</span> <span class="kw">program</span> <span class="kw">drop</span> mean_vs_median</span>
<span id="cb1-3"><a></a><span class="kw">program</span> <span class="kw">define</span> mean_vs_median, <span class="kw">eclass</span></span>
<span id="cb1-4"><a></a>  <span class="kw">syntax</span>, [nobs(<span class="kw">int</span> 100)]</span>
<span id="cb1-5"><a></a>  <span class="kw">clear</span></span>
<span id="cb1-6"><a></a>  ** Set  # <span class="kw">of</span> <span class="kw">obs</span></span>
<span id="cb1-7"><a></a>  <span class="kw">set</span> <span class="kw">obs</span> <span class="ot">`nobs'</span></span>
<span id="cb1-8"><a></a>  ** Generate a random <span class="kw">variable</span></span>
<span id="cb1-9"><a></a>  <span class="kw">gen</span> x = rnormal(0,1)</span>
<span id="cb1-10"><a></a>  ** Calculate <span class="kw">mean</span> and <span class="kw">median</span></span>
<span id="cb1-11"><a></a>  <span class="kw">qui</span>:<span class="kw">sum</span> x,<span class="kw">d</span></span>
<span id="cb1-12"><a></a>  ** Store results</span>
<span id="cb1-13"><a></a>  <span class="fu">matrix</span> b = <span class="fu">r</span>(<span class="kw">mean</span>), <span class="fu">r</span>(p50)</span>
<span id="cb1-14"><a></a>  ** <span class="kw">post</span> results</span>
<span id="cb1-15"><a></a>  <span class="fu">matrix</span> colname b = <span class="st">"mean"</span> <span class="st">"median"</span></span>
<span id="cb1-16"><a></a>  <span class="kw">ereturn</span> <span class="kw">post</span> b</span>
<span id="cb1-17"><a></a><span class="kw">end</span></span>
<span id="cb1-18"><a></a>mean_vs_median</span>
<span id="cb1-19"><a></a><span class="kw">ereturn</span> <span class="kw">display</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>div.jp-Notebook .datagrid-container {min-height: 448px; }</style>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Number of observations (_N) was 0, now 100.
------------------------------------------------------------------------------
             | Coefficient
-------------+----------------------------------------------------------------
        mean |  -.1445693
      median |  -.1970271
------------------------------------------------------------------------------</code></pre>
</div>
</div>
<p>Now that the program is SET, lets run it 1000 times:</p>
<div id="757a097a" class="cell larger" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb3-1"><a></a><span class="kw">set</span> <span class="dv">seed</span> 101</span>
<span id="cb3-2"><a></a><span class="kw">simulate</span>, reps(1000): mean_vs_median, nobs(500)</span>
<span id="cb3-3"><a></a><span class="kw">sum</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
      Command: mean_vs_median, nobs(500)

Simulations (1,000): .........10.........20.........30.........40.........50...
&gt; ......60.........70.........80.........90.........100.........110.........120
&gt; .........130.........140.........150.........160.........170.........180.....
&gt; ....190.........200.........210.........220.........230.........240.........2
&gt; 50.........260.........270.........280.........290.........300.........310...
&gt; ......320.........330.........340.........350.........360.........370........
&gt; .380.........390.........400.........410.........420.........430.........440.
&gt; ........450.........460.........470.........480.........490.........500......
&gt; ...510.........520.........530.........540.........550.........560.........57
&gt; 0.........580.........590.........600.........610.........620.........630....
&gt; .....640.........650.........660.........670.........680.........690.........
&gt; 700.........710.........720.........730.........740.........750.........760..
&gt; .......770.........780.........790.........800.........810.........820.......
&gt; ..830.........840.........850.........860.........870.........880.........890
&gt; .........900.........910.........920.........930.........940.........950.....
&gt; ....960.........970.........980.........990.........1,000 done

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
     _b_mean |      1,000     .001419     .043875  -.1660358   .1525889
   _b_median |      1,000    .0000899    .0544004  -.1851489   .1853068</code></pre>
</div>
</div>
<p>Conclusion, when N=100, and the distribution is normal, the mean is more efficient than the median.</p>
<h3 id="change-assumptions-from-n-to-t-distribution">Change assumptions, from N to t-distribution</h3>
<div id="62eebb08" class="cell larger" data-execution_count="3">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb5-1"><a></a><span class="co">// define a program</span></span>
<span id="cb5-2"><a></a><span class="kw">capture</span> <span class="kw">program</span> <span class="kw">drop</span> mean_vs_median</span>
<span id="cb5-3"><a></a><span class="kw">program</span> <span class="kw">define</span> mean_vs_median, <span class="kw">eclass</span></span>
<span id="cb5-4"><a></a>  <span class="kw">syntax</span>, [nobs(<span class="kw">int</span> 100) rt(<span class="kw">int</span> 5)]</span>
<span id="cb5-5"><a></a>  <span class="kw">clear</span></span>
<span id="cb5-6"><a></a>  <span class="kw">set</span> <span class="kw">obs</span> <span class="ot">`nobs'</span></span>
<span id="cb5-7"><a></a>  <span class="kw">gen</span> x = rt(<span class="ot">`rt'</span>)</span>
<span id="cb5-8"><a></a>  <span class="kw">qui</span>:<span class="kw">sum</span> x,<span class="kw">d</span></span>
<span id="cb5-9"><a></a>  <span class="fu">matrix</span> b = <span class="fu">r</span>(<span class="kw">mean</span>), <span class="fu">r</span>(p50)</span>
<span id="cb5-10"><a></a>  <span class="fu">matrix</span> colname b = <span class="st">"mean"</span> <span class="st">"median"</span></span>
<span id="cb5-11"><a></a>  <span class="kw">ereturn</span> <span class="kw">post</span> b</span>
<span id="cb5-12"><a></a><span class="kw">end</span></span>
<span id="cb5-13"><a></a> <span class="kw">set</span> <span class="dv">seed</span> 101</span>
<span id="cb5-14"><a></a><span class="kw">simulate</span>, reps(1000) <span class="kw">nodots</span>: mean_vs_median, nobs(500) rt(2)</span>
<span id="cb5-15"><a></a><span class="kw">sum</span></span>
<span id="cb5-16"><a></a><span class="kw">simulate</span>, reps(1000) <span class="kw">nodots</span>: mean_vs_median, nobs(500) rt(4)</span>
<span id="cb5-17"><a></a><span class="kw">sum</span></span>
<span id="cb5-18"><a></a><span class="kw">simulate</span>, reps(1000) <span class="kw">nodots</span>: mean_vs_median, nobs(500) rt(6)</span>
<span id="cb5-19"><a></a><span class="kw">sum</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>

      Command: mean_vs_median, nobs(500) rt(2)


    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
     _b_mean |      1,000   -.0199475    .2203307  -4.369244   .6070946
   _b_median |      1,000    .0002406    .0640181  -.1970648   .1889922

      Command: mean_vs_median, nobs(500) rt(4)


    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
     _b_mean |      1,000    .0007863    .0647392  -.2136446   .2056455
   _b_median |      1,000    .0024002    .0602134  -.1902502   .2014696

      Command: mean_vs_median, nobs(500) rt(6)


    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
     _b_mean |      1,000    .0007195    .0531958  -.1984012   .2054568
   _b_median |      1,000    .0008841    .0580835  -.1863388   .2035508</code></pre>
</div>
</div>
</section>
<section id="properties-of-estimators" class="slide level2 scrollable">
<h2>Properties of estimators</h2>
<ul>
<li>Monte Carlo methods can also be used to study the properties of estimators.</li>
<li>Consider the following example:
<ul>
<li>We want to study the properties of the OLS estimator when the error term is heteroskedastic.</li>
</ul></li>
</ul>
<p><span class="math display">\[y_i = \beta_0 + \beta_1 x_i + u_i*exp(\gamma x_i)\]</span></p>
<ul>
<li><p>What are the consequences of heteroskedasticity in the OLS estimator?</p></li>
<li><p>lets set up a simulation to study this.</p></li>
</ul>
<div id="fbf00190" class="cell larger" data-execution_count="4">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb7-1"><a></a><span class="co">// define a program</span></span>
<span id="cb7-2"><a></a><span class="kw">capture</span> <span class="kw">program</span> <span class="kw">drop</span> ols_hetero</span>
<span id="cb7-3"><a></a><span class="kw">program</span> <span class="kw">define</span> ols_hetero, <span class="kw">eclass</span></span>
<span id="cb7-4"><a></a>  <span class="kw">syntax</span>, [nobs(<span class="kw">int</span> 100) b0(<span class="fu">real</span> 1) b1(<span class="fu">real</span> 1) <span class="kw">gamma</span>(<span class="fu">real</span> 1)]</span>
<span id="cb7-5"><a></a>  <span class="kw">clear</span></span>
<span id="cb7-6"><a></a>  <span class="kw">set</span> <span class="kw">obs</span> <span class="ot">`nobs'</span></span>
<span id="cb7-7"><a></a>  <span class="kw">gen</span> x = rnormal(0,1)</span>
<span id="cb7-8"><a></a>  <span class="kw">gen</span> u = rnormal(0,1)</span>
<span id="cb7-9"><a></a>  <span class="kw">gen</span> <span class="fu">y</span> = <span class="ot">`b0'</span> + <span class="ot">`b1'</span> * x + u*<span class="fu">exp</span>(<span class="ot">`gamma'</span>*x)</span>
<span id="cb7-10"><a></a>  <span class="co">// run regression (under homoskedasticity)</span></span>
<span id="cb7-11"><a></a>  <span class="kw">qui</span>:<span class="kw">reg</span> <span class="fu">y</span> x</span>
<span id="cb7-12"><a></a>  <span class="co">// store results</span></span>
<span id="cb7-13"><a></a>  <span class="fu">matrix</span> b = _b[<span class="dt">_cons</span>], _se[<span class="dt">_cons</span>], _b[x], _se[x]</span>
<span id="cb7-14"><a></a>  <span class="fu">matrix</span> colname b = <span class="st">"b0"</span> <span class="st">"se0"</span> <span class="st">"b1"</span> <span class="st">"se1"</span></span>
<span id="cb7-15"><a></a>  <span class="kw">ereturn</span> <span class="kw">post</span> b</span>
<span id="cb7-16"><a></a><span class="kw">end</span></span>
<span id="cb7-17"><a></a><span class="kw">simulate</span>, reps(1000) <span class="kw">nodots</span>: ols_hetero, nobs(500) b0(1) b1(1) <span class="kw">gamma</span>(1)</span>
<span id="cb7-18"><a></a><span class="kw">sum</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>

      Command: ols_hetero, nobs(500) b0(1) b1(1) gamma(1)


    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       _b_b0 |      1,000    .9979773    .1210228   .6013685   1.434932
      _b_se0 |      1,000    .1196379    .0220658   .0737395   .2717805
       _b_b1 |      1,000    .9864205    .2661498   .0342865     1.8922
      _b_se1 |      1,000    .1195836    .0210792   .0808713   .2756631</code></pre>
</div>
</div>
<h3 id="correcting-for-heteroskedasticity">Correcting for heteroskedasticity</h3>
<p>We can correct for heteroskedasticity using robust standard errors.</p>
<div id="f78e4b99" class="cell larger" data-execution_count="5">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb9-1"><a></a><span class="co">// define a program</span></span>
<span id="cb9-2"><a></a><span class="kw">capture</span> <span class="kw">program</span> <span class="kw">drop</span> ols_hetero</span>
<span id="cb9-3"><a></a><span class="kw">program</span> <span class="kw">define</span> ols_hetero, <span class="kw">eclass</span></span>
<span id="cb9-4"><a></a>  <span class="kw">syntax</span>, [nobs(<span class="kw">int</span> 100) b0(<span class="fu">real</span> 1) b1(<span class="fu">real</span> 1) <span class="kw">gamma</span>(<span class="fu">real</span> 1)]</span>
<span id="cb9-5"><a></a>  <span class="kw">clear</span></span>
<span id="cb9-6"><a></a>  <span class="kw">set</span> <span class="kw">obs</span> <span class="ot">`nobs'</span></span>
<span id="cb9-7"><a></a>  <span class="kw">gen</span> x = rnormal(0,1)</span>
<span id="cb9-8"><a></a>  <span class="kw">gen</span> u = rnormal(0,1)</span>
<span id="cb9-9"><a></a>  <span class="kw">gen</span> <span class="fu">y</span> = <span class="ot">`b0'</span> + <span class="ot">`b1'</span> * x + u*<span class="fu">exp</span>(<span class="ot">`gamma'</span>*x)</span>
<span id="cb9-10"><a></a>  <span class="co">// run regression (under homoskedasticity)</span></span>
<span id="cb9-11"><a></a>  <span class="kw">qui</span>:<span class="kw">reg</span> <span class="fu">y</span> x, <span class="kw">robust</span></span>
<span id="cb9-12"><a></a>  <span class="co">// store results</span></span>
<span id="cb9-13"><a></a>  <span class="fu">matrix</span> b = _b[<span class="dt">_cons</span>], _se[<span class="dt">_cons</span>], _b[x], _se[x]</span>
<span id="cb9-14"><a></a>  <span class="fu">matrix</span> colname b = <span class="st">"b0"</span> <span class="st">"se0"</span> <span class="st">"b1"</span> <span class="st">"se1"</span></span>
<span id="cb9-15"><a></a>  <span class="kw">ereturn</span> <span class="kw">post</span> b</span>
<span id="cb9-16"><a></a><span class="kw">end</span></span>
<span id="cb9-17"><a></a><span class="kw">simulate</span>, reps(1000) <span class="kw">nodots</span>: ols_hetero, nobs(500) b0(1) b1(1) <span class="kw">gamma</span>(1)</span>
<span id="cb9-18"><a></a><span class="kw">sum</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>

      Command: ols_hetero, nobs(500) b0(1) b1(1) gamma(1)


    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       _b_b0 |      1,000     1.00342    .1180407   .6255065     1.3921
      _b_se0 |      1,000    .1171892    .0219696   .0807092   .3564852
       _b_b1 |      1,000     1.00355    .2589393  -.2493259   1.956252
      _b_se1 |      1,000    .2407364    .0913925   .1092693   1.174903</code></pre>
</div>
</div>
<p>or using weighted least squares.</p>
<div id="e5966504" class="cell larger" data-execution_count="6">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb11-1"><a></a><span class="co">// define a program</span></span>
<span id="cb11-2"><a></a><span class="kw">capture</span> <span class="kw">program</span> <span class="kw">drop</span> ols_hetero</span>
<span id="cb11-3"><a></a><span class="kw">program</span> <span class="kw">define</span> ols_hetero, <span class="kw">eclass</span></span>
<span id="cb11-4"><a></a>  <span class="kw">syntax</span>, [nobs(<span class="kw">int</span> 100) b0(<span class="fu">real</span> 1) b1(<span class="fu">real</span> 1) <span class="kw">gamma</span>(<span class="fu">real</span> 1)]</span>
<span id="cb11-5"><a></a>  <span class="kw">clear</span></span>
<span id="cb11-6"><a></a>  <span class="kw">set</span> <span class="kw">obs</span> <span class="ot">`nobs'</span></span>
<span id="cb11-7"><a></a>  <span class="kw">gen</span> x = rnormal(0,1)</span>
<span id="cb11-8"><a></a>  <span class="kw">gen</span> u = rnormal(0,1)</span>
<span id="cb11-9"><a></a>  <span class="kw">gen</span> <span class="fu">y</span> = <span class="ot">`b0'</span> + <span class="ot">`b1'</span> * x + u*<span class="fu">exp</span>(<span class="ot">`gamma'</span>*x)</span>
<span id="cb11-10"><a></a>  <span class="co">// run regression (under homoskedasticity)</span></span>
<span id="cb11-11"><a></a>  <span class="kw">qui</span>:<span class="kw">reg</span> <span class="fu">y</span> x, </span>
<span id="cb11-12"><a></a>  <span class="kw">predict</span> uhat, <span class="kw">resid</span></span>
<span id="cb11-13"><a></a>  <span class="kw">gen</span> lnuhat2 = <span class="fu">ln</span>(uhat^2)</span>
<span id="cb11-14"><a></a>  <span class="kw">reg</span> lnuhat2 x</span>
<span id="cb11-15"><a></a>  <span class="kw">predict</span> lnhx</span>
<span id="cb11-16"><a></a>  <span class="kw">gen</span> hx=<span class="fu">exp</span>(lnhx)</span>
<span id="cb11-17"><a></a>  <span class="co">// store results</span></span>
<span id="cb11-18"><a></a>  <span class="kw">qui</span>:<span class="kw">reg</span> <span class="fu">y</span> x [<span class="fu">w</span>=1/hx], </span>
<span id="cb11-19"><a></a>  <span class="fu">matrix</span> b = _b[<span class="dt">_cons</span>], _se[<span class="dt">_cons</span>], _b[x], _se[x]</span>
<span id="cb11-20"><a></a>  <span class="fu">matrix</span> colname b = <span class="st">"b0"</span> <span class="st">"se0"</span> <span class="st">"b1"</span> <span class="st">"se1"</span></span>
<span id="cb11-21"><a></a>  <span class="kw">ereturn</span> <span class="kw">post</span> b</span>
<span id="cb11-22"><a></a><span class="kw">end</span></span>
<span id="cb11-23"><a></a><span class="kw">simulate</span>, reps(1000) <span class="kw">nodots</span>: ols_hetero, nobs(500) b0(1) b1(1) <span class="kw">gamma</span>(1)</span>
<span id="cb11-24"><a></a><span class="kw">sum</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>

      Command: ols_hetero, nobs(500) b0(1) b1(1) gamma(1)


    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       _b_b0 |      1,000    1.001033    .0465683   .8545606   1.252005
      _b_se0 |      1,000    .0478398    .0084316   .0288236   .1462429
       _b_b1 |      1,000    1.001063    .0277128   .8875045   1.301835
      _b_se1 |      1,000    .0270911    .0091106   .0088032   .1357872</code></pre>
</div>
</div>
</section>
<section id="more-on-monte-carlo-simulations" class="slide level2 scrollable">
<h2>More on Monte Carlo Simulations</h2>
<ul>
<li><p>You can use Monte Carlo simulations to study the properties of new estimators as well. (most often)</p></li>
<li><p>The structure of the simulation, however, will depend on the estimator you want to study, and may not be fully generalizable.</p>
<ul>
<li>Notice that in the previous example, we assumed that all data needed to be simulated.</li>
<li>But, we could just as well simulate only “parts” of the data, and use observed data for the rest.</li>
</ul></li>
</ul>
<div id="95784d6b" class="cell larger" data-execution_count="7">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb13-1"><a></a>frause oaxaca, <span class="kw">clear</span></span>
<span id="cb13-2"><a></a><span class="kw">probit</span> lfp female educ age agesq married divorced</span>
<span id="cb13-3"><a></a><span class="kw">predict</span> lfp_xb, <span class="kw">xb</span></span>
<span id="cb13-4"><a></a><span class="fu">matrix</span> b=<span class="fu">e</span>(b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Excerpt from the Swiss Labor Market Survey 1998)

Iteration 0:  Log likelihood = -634.26553  
Iteration 1:  Log likelihood = -453.80541  
Iteration 2:  Log likelihood = -429.25759  
Iteration 3:  Log likelihood = -428.40991  
Iteration 4:  Log likelihood = -428.40986  
Iteration 5:  Log likelihood = -428.40986  

Probit regression                                       Number of obs =  1,647
                                                        LR chi2(6)    = 411.71
                                                        Prob &gt; chi2   = 0.0000
Log likelihood = -428.40986                             Pseudo R2     = 0.3246

------------------------------------------------------------------------------
         lfp | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]
-------------+----------------------------------------------------------------
      female |  -1.644408   .1498206   -10.98   0.000    -1.938051   -1.350765
        educ |   .1051167   .0251728     4.18   0.000     .0557789    .1544544
         age |   .1045008   .0385916     2.71   0.007     .0288627    .1801389
       agesq |  -.0012596   .0004463    -2.82   0.005    -.0021344   -.0003848
     married |  -1.692076   .1887409    -8.97   0.000    -2.062001    -1.32215
    divorced |    -.68518   .2319883    -2.95   0.003    -1.139869   -.2304912
       _cons |   .4413072   .7648821     0.58   0.564    -1.057834    1.940448
------------------------------------------------------------------------------</code></pre>
</div>
</div>
<div id="16317a3c" class="cell larger" data-execution_count="8">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb15-1"><a></a>* Latent <span class="kw">model</span> LFP =1(lfp_xb + <span class="fu">e</span>&gt;0)</span>
<span id="cb15-2"><a></a><span class="kw">capture</span> <span class="kw">program</span> <span class="kw">drop</span> probit_sim</span>
<span id="cb15-3"><a></a><span class="kw">program</span>  probit_sim, <span class="kw">eclass</span></span>
<span id="cb15-4"><a></a>  <span class="kw">capture</span> <span class="kw">drop</span> lfp_hat</span>
<span id="cb15-5"><a></a>  <span class="kw">gen</span> lfp_hat=(lfp_xb + rnormal(0,1))&gt;0</span>
<span id="cb15-6"><a></a>  <span class="kw">probit</span> lfp_hat female educ age agesq married divorced, from(b, copy)</span>
<span id="cb15-7"><a></a><span class="kw">end</span></span>
<span id="cb15-8"><a></a><span class="kw">simulate</span> _b _se, reps(500) <span class="kw">nodots</span>: probit_sim</span>
<span id="cb15-9"><a></a><span class="kw">ren</span> lfp_hat* *</span>
<span id="cb15-10"><a></a><span class="kw">sum</span> ,sep(7)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>

      Command: probit_sim


    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
   _b_female |        500    -1.67208    .1594671  -2.262682  -1.280128
     _b_educ |        500     .108218    .0251913   .0453378   .1974491
      _b_age |        500    .1022977     .038849   -.004108   .2443264
    _b_agesq |        500   -.0012359    .0004483  -.0029406  -.0000835
  _b_married |        500   -1.720405    .1903062  -2.425838  -1.247641
 _b_divorced |        500   -.7046396    .2310935  -1.387282   .1018858
     _b_cons |        500    .5167748    .7899037  -1.920398   2.650355
-------------+---------------------------------------------------------
  _se_female |        500    .1548574    .0187049   .1234346   .2547092
    _se_educ |        500    .0255194    .0012991   .0223761    .029805
     _se_age |        500    .0389973    .0017384   .0336116   .0466778
   _se_agesq |        500    .0004507    .0000184   .0003941   .0005336
 _se_married |        500    .1987176    .0234131   .1538517   .3142596
_se_divorced |        500    .2410041    .0207673    .199707   .3420741
    _se_cons |        500    .7709869    .0397739   .6426999   .9831291</code></pre>
</div>
</div>
<ul>
<li>To some extent, this is similar to the imputation methods we have seen before.</li>
<li>More complex versions of this can be used to elaborate micro-simulations.</li>
</ul>
</section>
<section id="what-are-micro-simulations" class="slide level2">
<h2>What are micro-simulations?</h2>
<ul>
<li><p>Micro-simulation is a <strong>technique</strong> that is used to make micro units act and interact in a way that it is possible to aggregate to the level of interest.</p></li>
<li><p>A micro simulation model can be seen as a set of rules, which operates on a sample of micro units (individuals, households, firms, etc.) to produce a set of outcomes.</p></li>
<li><p>The goal is to produce synthetic datasets that can be used to estimate the effects of policy changes.</p></li>
<li><p>Because micro-simulations are based on micro-data, they have the potential to capture the heterogeneity of the population. (decisions, preferences, etc.)</p></li>
</ul>
</section>
<section id="section" class="slide level2">
<h2></h2>
<ul>
<li>We can also think about micro-simulations as a way to <strong>simulate/predict/impute</strong> the behavior of a population of interest.
<ul>
<li>Thus a lot of what you learned in terms of Modeling, imputations, and matching can be applied here.</li>
</ul></li>
</ul>
<h3 id="so-what-do-we-need">So what do we need?</h3>
<ul>
<li><p>We need a <strong>population</strong> of micro units (individuals, households, firms, etc.) that is representative of the population of interest. (survey data)</p></li>
<li><p>Details on a policy change that we want to simulate. (policy parameters)</p></li>
<li><p>A set of rules that describe how the micro units interact with each other and with the policy change. (model for behavior)</p></li>
<li><p>An outcome of interest that we want to study. (outcome variable)</p></li>
</ul>
</section>
<section id="how-do-we-do-it" class="slide level2">
<h2>How do we do it?</h2>
<ul>
<li><p>Depending on the type of analysis we want to do, the structure of a micro-simulation can be very simple or very complex.</p></li>
<li><p>Consider the following example:</p>
<ul>
<li>We want to study the effect of a policy that aims to increase the minimum wage in the labor market. What effects would this have?
<ul>
<li>Higher wages ?</li>
<li>increase/decrease in employment?<br>
</li>
<li>Changes in the distribution of wages?</li>
<li>Changes in the Economic structure?</li>
</ul></li>
</ul></li>
<li><p>More complex models require more sophisticated interactions between the micro/and macro units and the policy change.</p></li>
<li><p>However, simpler models can be useful at least to study first order/statistical effects of a policy change.</p></li>
</ul>
</section>
<section id="example-the-case-of-higher-education" class="slide level2">
<h2>Example: The case of higher education</h2>
<ul>
<li><p>Consider the following. The government wants to increase educational attainment in the population.</p></li>
<li><p>To do so, they want to evaluate the impact that a 2 additional years for people with less than 12 years of education would have on the population.</p></li>
<li><p>How do we do this?</p></li>
<li><p>For simplicilty , lets use the <code>oaxaca</code> dataset</p></li>
</ul>
</section>
<section id="section-1" class="slide level2 scrollable">
<h2></h2>
<p>We can start by modeling the effect of education on wages.</p>
<p><span class="math display">\[log(wage)= \beta X + \beta_e educ + u\]</span></p>
<div id="0c046c0e" class="cell larger" data-execution_count="9">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb17-1"><a></a>frause oaxaca, <span class="kw">clear</span></span>
<span id="cb17-2"><a></a><span class="kw">reg</span> lnwage educ exper tenure female age, </span>
<span id="cb17-3"><a></a><span class="kw">predict</span>  res, res</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Excerpt from the Swiss Labor Market Survey 1998)

      Source |       SS           df       MS      Number of obs   =     1,434
-------------+----------------------------------   F(5, 1428)      =    101.03
       Model |   105.60186         5   21.120372   Prob &gt; F        =    0.0000
    Residual |  298.517944     1,428  .209046179   R-squared       =    0.2613
-------------+----------------------------------   Adj R-squared   =    0.2587
       Total |  404.119804     1,433  .282009633   Root MSE        =    .45722

------------------------------------------------------------------------------
      lnwage | Coefficient  Std. err.      t    P&gt;|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        educ |   .0743986   .0052612    14.14   0.000     .0640782    .0847191
       exper |   .0022628   .0018958     1.19   0.233    -.0014562    .0059817
      tenure |   .0021805   .0019783     1.10   0.271    -.0017001    .0060611
      female |  -.1321951   .0254327    -5.20   0.000    -.1820846   -.0823056
         age |   .0136344   .0017751     7.68   0.000     .0101523    .0171165
       _cons |   1.985785   .0732567    27.11   0.000     1.842083    2.129488
------------------------------------------------------------------------------
(213 missing values generated)</code></pre>
</div>
</div>
<p>ID the policy change</p>
<div id="c7e442e2" class="cell larger" data-execution_count="10">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb19-1"><a></a><span class="kw">clonevar</span> educ2=educ</span>
<span id="cb19-2"><a></a><span class="kw">replace</span> educ=educ+2 <span class="kw">if</span> educ&lt;12</span>
<span id="cb19-3"><a></a><span class="kw">predict</span> yhat2, <span class="kw">xb</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(1,099 real changes made)
(213 missing values generated)</code></pre>
</div>
</div>
<p>So what is the effect on wages? (if there is no selection bias)</p>
<div id="74eda541" class="cell larger" data-execution_count="11">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb21-1"><a></a><span class="kw">gen</span> wage = <span class="fu">exp</span>(lnwage)</span>
<span id="cb21-2"><a></a><span class="kw">gen</span> wage2 = <span class="fu">exp</span>(yhat2+res)</span>
<span id="cb21-3"><a></a><span class="kw">gen</span> wage_diff = wage2-wage</span>
<span id="cb21-4"><a></a><span class="kw">tabstat</span> wage_diff</span>
<span id="cb21-5"><a></a><span class="kw">replace</span> educ = educ2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(213 missing values generated)
(213 missing values generated)
(213 missing values generated)

    Variable |      Mean
-------------+----------
   wage_diff |  2.947924
------------------------
(1,099 real changes made)</code></pre>
</div>
</div>
<p>Wage has increased in 2.95.</p>
<p>But is this the only effect??</p>
</section>
<section id="section-2" class="slide level2 scrollable">
<h2></h2>
<ul>
<li><p>What about the effect on employment?</p></li>
<li><p>This is a more complex model, and we need further assumptions</p>
<ul>
<li>Assume anyone who wants to work, will find a job.</li>
<li>Those employed remain employed</li>
<li>Those non-employed will transition to employment marginally</li>
</ul></li>
</ul>
<p><span class="math display">\[P(lfp=1|X,educ)= \beta X + \beta_e educ + u
\]</span></p>
<p>First model the probability of employment</p>
<div id="4bef62aa" class="cell larger" data-execution_count="12">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb23-1"><a></a>frause oaxaca, <span class="kw">clear</span></span>
<span id="cb23-2"><a></a><span class="kw">qui</span>:<span class="kw">probit</span> lfp educ female age single married kids6 kids714</span>
<span id="cb23-3"><a></a><span class="kw">predict</span> lfp_xb, <span class="kw">xb</span></span>
<span id="cb23-4"><a></a><span class="kw">predict</span> pr_org, pr</span>
<span id="cb23-5"><a></a></span>
<span id="cb23-6"><a></a><span class="kw">replace</span> lfp_xb = lfp_xb + _b[educ] * 2 <span class="kw">if</span> educ&lt;12</span>
<span id="cb23-7"><a></a><span class="kw">gen</span> plfp = <span class="fu">normal</span>(lfp_xb)</span>
<span id="cb23-8"><a></a></span>
<span id="cb23-9"><a></a>** Before and after the policy change</span>
<span id="cb23-10"><a></a><span class="kw">sum</span> plfp pr_org </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Excerpt from the Swiss Labor Market Survey 1998)
(1,099 real changes made)

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
        plfp |      1,647    .8995986    .1614962   .0777393   .9999999
      pr_org |      1,647    .8707874    .1925782   .0604887   .9999999</code></pre>
</div>
</div>
<p>So now we have the original probability of employment and the probability of employment after the policy change.</p>
<p>How do we know who will transition from not working to working?</p>
<ul>
<li>Option 1. Assign new workers based on the relative change in the probability of employment.</li>
</ul>
<div id="e9b4161b" class="cell larger" data-execution_count="13">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb25-1"><a></a><span class="kw">gen</span> dprob = (plfp-pr_org)/pr_org</span>
<span id="cb25-2"><a></a><span class="kw">clonevar</span> lfp_post1 = lfp</span>
<span id="cb25-3"><a></a><span class="kw">replace</span> lfp_post1 =1 <span class="kw">if</span> lfp==0 &amp; dprob&gt;runiform()</span>
<span id="cb25-4"><a></a><span class="kw">sum</span>  lfp_post1 lfp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(35 real changes made)

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
   lfp_post1 |      1,647    .8919247    .3105698          0          1
         lfp |      1,647     .870674    .3356624          0          1</code></pre>
</div>
</div>
<ul>
<li>Option 2. Simulate employment status based on the original and post-policy probability of employment.</li>
</ul>
<div id="111d1527" class="cell larger" data-execution_count="14">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb27-1"><a></a>** Option 2</span>
<span id="cb27-2"><a></a>drop2 unf lfp_org lfp_post</span>
<span id="cb27-3"><a></a><span class="kw">gen</span> unf = runiform()</span>
<span id="cb27-4"><a></a><span class="kw">gen</span> lfp_org  = pr_org&gt;unf</span>
<span id="cb27-5"><a></a><span class="kw">gen</span> lfp_post = plfp  &gt;unf</span>
<span id="cb27-6"><a></a></span>
<span id="cb27-7"><a></a><span class="kw">sum</span> lfp_post  lfp_org</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>variable unf not found
variable lfp_org not found
variable lfp_post not found

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    lfp_post |      1,647    .9046752    .2937523          0          1
     lfp_org |      1,647    .8737098    .3322771          0          1</code></pre>
</div>
</div>
<ul>
<li>Both options are valid, but
<ul>
<li>First one requires to impute wages for the new workers only.</li>
<li>Second one requires to impute wages for the entire population.</li>
</ul></li>
</ul>
</section>
<section id="section-3" class="slide level2 scrollable">
<h2></h2>
<h3 id="imputing-wages">Imputing wages:</h3>
<ul>
<li>We could assume no selection bias.</li>
<li>We may need to use only data available for everyone, or use imputed data (exper tenure) (perhaps at 0?)</li>
</ul>
<div id="53e4ffec" class="cell larger" data-execution_count="15">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb29-1"><a></a><span class="kw">reg</span> lnwage educ female age single married kids6 kids714, </span>
<span id="cb29-2"><a></a><span class="kw">predict</span>  res, res</span>
<span id="cb29-3"><a></a><span class="kw">predict</span> lnwage_hat, <span class="kw">xb</span></span>
<span id="cb29-4"><a></a>** Simulating Known wages component</span>
<span id="cb29-5"><a></a><span class="kw">replace</span> lnwage_hat = lnwage_hat + _b[educ] * 2 <span class="kw">if</span> educ&lt;12</span>
<span id="cb29-6"><a></a>** Simulating random component</span>
<span id="cb29-7"><a></a>** For those already working:</span>
<span id="cb29-8"><a></a><span class="kw">replace</span> lnwage_hat = lnwage_hat + res <span class="kw">if</span> lfp==1</span>
<span id="cb29-9"><a></a>** Simulate unobserved</span>
<span id="cb29-10"><a></a><span class="kw">qui</span>: <span class="kw">sum</span> res, </span>
<span id="cb29-11"><a></a><span class="kw">replace</span> lnwage_hat = lnwage_hat + rnormal(0,<span class="fu">r</span>(<span class="fu">sd</span>)) <span class="kw">if</span> lfp_post1==1 &amp; lfp==0</span>
<span id="cb29-12"><a></a></span>
<span id="cb29-13"><a></a><span class="kw">gen</span> wage_post = <span class="fu">exp</span>(lnwage_hat) <span class="kw">if</span> lfp_post1==1 | lfp==1</span>
<span id="cb29-14"><a></a><span class="kw">gen</span> wage = <span class="fu">exp</span>(lnwage)</span>
<span id="cb29-15"><a></a><span class="kw">sum</span> wage wage_post</span>
<span id="cb29-16"><a></a>sgini wage wage_post</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
      Source |       SS           df       MS      Number of obs   =     1,434
-------------+----------------------------------   F(7, 1426)      =     79.23
       Model |  113.158257         7  16.1654653   Prob &gt; F        =    0.0000
    Residual |  290.961547     1,426  .204040355   R-squared       =    0.2800
-------------+----------------------------------   Adj R-squared   =    0.2765
       Total |  404.119804     1,433  .282009633   Root MSE        =    .45171

------------------------------------------------------------------------------
      lnwage | Coefficient  Std. err.      t    P&gt;|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        educ |   .0709179   .0050262    14.11   0.000     .0610584    .0807774
      female |  -.1427501   .0244736    -5.83   0.000    -.1907583   -.0947419
         age |    .016475   .0014033    11.74   0.000     .0137222    .0192277
      single |  -.0711724   .0443651    -1.60   0.109    -.1582002    .0158554
     married |  -.0977016   .0379654    -2.57   0.010    -.1721755   -.0232276
       kids6 |   .1085073   .0239699     4.53   0.000     .0614873    .1555272
     kids714 |   .0656187    .019681     3.33   0.001      .027012    .1042254
       _cons |   1.999222   .0902563    22.15   0.000     1.822173    2.176272
------------------------------------------------------------------------------
(213 missing values generated)
(1,099 real changes made)
(1,434 real changes made)
(35 real changes made)
(178 missing values generated)
(213 missing values generated)

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
        wage |      1,434    32.39167    16.12498   1.661434   192.3077
   wage_post |      1,469    35.19396    16.94609   1.873127   221.6129

Gini coefficient for wage, wage_post

-----------------------
    Variable |      v=2
-------------+---------
        wage |   0.2460
   wage_post |   0.2356
-----------------------</code></pre>
</div>
</div>
<p>This is equivalent to running a single imputation round. However, we could repeat the process M times to get a measure for the precission of our estimates.</p>
<h3 id="what-else-can-we-do">What else can we do?</h3>
<ul>
<li>We could go further and also simulate where would people work, and how would the economy change.</li>
<li>We could also account for selection problems</li>
<li>or make a more explicit model for distributional analysis.</li>
</ul>
</section>
<section id="st-micro-simulation" class="slide level2">
<h2>1st Micro-simulation</h2>
<h3 id="a-review">a Review</h3>
<ul>
<li><p>We have just use a simple micro-simulation to study the effect of a policy change (education) on wages and employment.</p></li>
<li><p>This simulation had many assumptions, and we could have done it in many different ways.</p></li>
<li><p>Among others, we assume no selection bias, with an instantaneous change in education, and no again of the population.</p></li>
<li><p>We also made important assumptions regarding the transition from non-employment to employment, and the imputation of wages.</p></li>
</ul>
</section>
<section id="not-the-only-way-to-do-it" class="slide level2">
<h2>Not the only way to do it</h2>
<ul>
<li><p>While many micro-simulations are based on stochastic simultions, there are other ways to do it.</p></li>
<li><p>In Hotckiss et al.&nbsp;(forthcoming), we use a deterministic micro-simulation to study the effect of tax-reforms on welfare changes and its distribution for the - first</p></li>
<li><p>How did we do it?</p></li>
</ul>
</section>
<section id="tax-reform-on-households-welfare" class="slide level2">
<h2>Tax Reform on Households Welfare</h2>
<ul>
<li>We concentrated mostly on couple households with young children (0-18 years old).</li>
<li>Using a heckman selection model, we impute wages for the non-working people (based on PMM).</li>
<li>Using observed and imputed wages, we impute the tax liability for each household before and after the reform. (TAX-SIM), and estimate after-tax wages.</li>
<li>Estimate Household Labor Supply based on HH utility and Non-linear Tobit model</li>
<li>Use HLS models, we make predictions for Labor Supply changes and utility changes given the Reform.
<ul>
<li>The Outcome was how much better/worse off would households be after the reform.</li>
</ul></li>
</ul>
</section></section>
<section>
<section id="levy-institute-microsimulation-model-limm" class="title-slide slide level1 center">
<h1>Levy Institute Microsimulation Model (LIMM)</h1>

</section>
<section id="intro" class="slide level2">
<h2>Intro</h2>
<ul>
<li>At Levy, we have also constructed a micro-simulation model to study employment simulations.</li>
<li>Method first developed for estimating the impact of the American Recovery and Reinvestment Act of 2009
<ul>
<li>Convert spending into jobs by industry and occupation (I/O matrix)</li>
<li>Assign potential workers to jobs</li>
<li>Predict earnings and hours</li>
</ul></li>
<li>For the work with LIMEW and LIMTIP, this has also been used for distributional analysis of employment assigment and services use.</li>
</ul>
</section>
<section id="limm-step-i" class="slide level2">
<h2>LIMM: Step I</h2>
<h3 id="job-creation">Job Creation</h3>
<ul>
<li>Consider a policy: Road construction, Services provision, etc.
<ul>
<li>Calculate changes in final demand for each industry the policy creates</li>
<li>Using I-O tables estimate change in total output for each industry</li>
<li>Use that change in output to estimate change demand for labor inputs
<ul>
<li>Transform the changes from labor imputs to generated jobs (consider wages)</li>
</ul></li>
<li>Distribute changes across occupations (within industry)
<ul>
<li>Using, for example, shares of employment by occupation within industry</li>
</ul></li>
</ul></li>
<li>With this we have a total number of jobs created by industry and occupation.</li>
</ul>
</section>
<section id="limm-step-ii" class="slide level2">
<h2>LIMM: Step II</h2>
<h3 id="job-assigment">Job Assigment</h3>
<ul>
<li>Given the Total change in Jobs, we need to assign workers to those jobs.
<ul>
<li>Who are the potential workers?
<ul>
<li>Not in LF: Potential, but not looking for work (may depend on characteristics). Avoid retired, disabled and students</li>
<li>Unemployed: Most likely to take a job (pool may not be large enough)</li>
<li>Underemployed: Working part-time, but willing to work full-time, or people aiming for better jobs. (May create job openings)</li>
<li>and Employed: May be willing to change jobs (may create job openings)</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="section-4" class="slide level2">
<h2></h2>
<h3 id="job-assigment-ii">Job Assigment II</h3>
<ul>
<li><p>Two Steps, modeling job creation and job assigment</p></li>
<li><p>A probit/logit model would be estimated to predict the likelihood of working, and this will be used to assign jobs.</p>
<ul>
<li><p>Job assignment is done using a multinomial model (<code>mprobit</code>) to predict likelihoods of working on a given occupation &amp; industry.</p></li>
<li><p>Ideally, you would like to do both at the same time, but that is a very complex model to estimate. Instead, each one is estimated separately.</p></li>
</ul></li>
</ul>
<p><span class="math display">\[\begin{aligned}
I^*(ind = 1 ) &amp;= \beta_1 X + e_1 \\
I^*(ind = 2 ) &amp;= \beta_2 X + e_2 \\
&amp;\vdots \\
I^*(ind = k ) &amp;= \beta_k X + e_k
\end{aligned}
\]</span></p>
<p>Where <span class="math inline">\(I^*(ind = k )\)</span> is the latent likelihood of working on industry <span class="math inline">\(k\)</span> given characteristics. Mprobit or Mlogit depends on the distribution of <span class="math inline">\(e_k\)</span>.</p>
<p>You choose Industry <span class="math inline">\(k\)</span> if <span class="math inline">\(I^*(ind = k )\)</span> is the highest among all industries.</p>
</section>
<section id="section-5" class="slide level2">
<h2></h2>
<h3 id="job-assigment-iii">Job Assigment III</h3>
<ul>
<li><p>Job Assigment is done as follows:</p>
<ul>
<li><p>For each potential worker, Calculate Prob of working. Those with the highest probability are assigned jobs first.</p></li>
<li><p>For Worker, <span class="math inline">\(i\)</span>, the individual is assigned to the industry with the highest likelihood of working. (until all jobs are assigned)</p>
<ul>
<li>Can be done followed by doing similar assigment for occupation within industry.</li>
<li>Or combine both industry and occupation (p_o * p_i)</li>
</ul></li>
</ul></li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<ul>
<li>Job allocation must consider jobs available and likehood of working on a given Occupation/Industry.</li>
<li>May want to avoid deterministic assignment.</li>
<li>could assigned based on random draws from the distribution of likelihoods.</li>
</ul>
</div>
</div>
</div>
</section>
<section id="section-6" class="slide level2">
<h2></h2>
<h3 id="earning-contributions">Earning contributions</h3>
<ul>
<li><p>Because some of the newly created jobs go to people who are employed in Family businesses (Farm and non farm income), one has to account for the “loss” of income from those jobs.</p></li>
<li><p>This is done by estimating the contribution of each member to the family business, and imputing the loss of income from the now “formally employed” member.</p>
<ul>
<li>For example, modeling farm income, predicting that income without the family member, and imputing the difference as the loss of income.</li>
</ul></li>
</ul>
</section>
<section id="section-7" class="slide level2">
<h2></h2>
<h3 id="job-assigment-iv-wages-and-hours">Job Assigment IV: Wages and Hours</h3>
<ul>
<li>Hours and Wages are imputed using a heckman model, and multiple stage process</li>
</ul>
<ol type="1">
<li>Use a probit model to predict the likelihood of working.</li>
<li>Given the model obtain the inverse mills ratios. <span class="math inline">\(imr = \phi(\alpha'x)/\Phi(\alpha'x)\)</span></li>
<li>Model wages and hours using IMR as a regressor. (Heckit model) (This includes info on imputed occupations/industry)</li>
<li>Use Imputed wages and hours to Match data to “donor” individuals. (PMM)</li>
<li>For people “potentially” leaving family business, compare new wages to family business contributions</li>
</ol>
</section>
<section id="section-8" class="slide level2">
<h2></h2>
<h3 id="hours-of-hp-re-assigment">Hours of HP re-assigment</h3>
<ul>
<li>People taking jobs may have to change their contributions to household production. (less time for HP)</li>
<li>But the rest of the family may also have to adjust their contributions to HP. (more time for HP?)
<ul>
<li>This is done via matching, where the “donor” are working individuals with similar family characteristics.</li>
<li>Or All working individuals</li>
<li>Currently, “recipients” are all individuals in the household, with atleast one new worker.
<ul>
<li>May be more sensible to impute hours</li>
<li>One may argue those not working may have to increase hours of HP. Or do nothing</li>
</ul></li>
</ul></li>
</ul>
<h3 id="other-considerations">Other considerations</h3>
<ul>
<li>Assigment of Child Care services</li>
</ul>
</section>
<section id="assessing-the-quality-of-the-simulation" class="slide level2">
<h2>Assessing the quality of the simulation</h2>
<ul>
<li>In principle, there is no way to know if the simulation is correct.
<ul>
<li>There is no “true” value to compare to.</li>
<li>However, one may want to at least ensure the simulation replicates the data.</li>
<li>One can potetially use the simulation to predict changes of a past policy, and compare to the actual changes.</li>
</ul></li>
<li>We do want to make “sanity” checks
<ul>
<li>Are results consistent and plausible?</li>
<li>Are distributions of post-assigment outcomes consistent with the data?</li>
</ul></li>
</ul>
</section>
<section id="limitations" class="slide level2">
<h2>Limitations</h2>
<ul>
<li>Since we use existing data, we make the implicit assumption “no behavioral changes” in other aspects
<ul>
<li>Things change as far as we can model them.</li>
</ul></li>
<li>Results are typically point estimates, and do not account for uncertainty.
<ul>
<li>We can use multiple imputation, monte carlo simulations, or bootstrapping to account for uncertainty.</li>
</ul></li>
<li>The results are only as good as the data we use and the assumptions we make.
<ul>
<li>We can use sensitivity analysis to test the robustness of the results to changes in assumptions.</li>
</ul></li>
</ul>
</section></section>
<section id="thats-all-folks" class="title-slide slide level1 center">
<h1>Thats All Folks!</h1>

<div class="quarto-auto-generated-content">
<div class="footer footer-default">

</div>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1600,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>