<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Econometrics MSC Levy - Stata-Basics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Econometrics MSC Levy</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./adv_class.html" rel="" target="">
 <span class="menu-text">Adv Methods and Causal Effects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./rm_class.html" rel="" target="">
 <span class="menu-text">Research Methods: Econometrics I</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./resources.html" rel="" target="">
 <span class="menu-text">Resources</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#get-to-know-stata" id="toc-get-to-know-stata" class="nav-link active" data-scroll-target="#get-to-know-stata">Get to know <code>Stata</code></a>
  <ul class="collapse">
  <li><a href="#command-window" id="toc-command-window" class="nav-link" data-scroll-target="#command-window">Command Window</a></li>
  <li><a href="#help" id="toc-help" class="nav-link" data-scroll-target="#help">Help</a></li>
  <li><a href="#installing-programs" id="toc-installing-programs" class="nav-link" data-scroll-target="#installing-programs">Installing Programs</a></li>
  <li><a href="#loading-data" id="toc-loading-data" class="nav-link" data-scroll-target="#loading-data">Loading Data</a>
  <ul class="collapse">
  <li><a href="#stata-system-files" id="toc-stata-system-files" class="nav-link" data-scroll-target="#stata-system-files">Stata System-files</a></li>
  <li><a href="#other" id="toc-other" class="nav-link" data-scroll-target="#other">Other</a></li>
  </ul></li>
  <li><a href="#basic-data-description" id="toc-basic-data-description" class="nav-link" data-scroll-target="#basic-data-description">Basic Data description</a></li>
  <li><a href="#summary-statistics" id="toc-summary-statistics" class="nav-link" data-scroll-target="#summary-statistics">Summary Statistics</a></li>
  <li><a href="#creating-variables" id="toc-creating-variables" class="nav-link" data-scroll-target="#creating-variables">Creating variables</a></li>
  <li><a href="#variables-management" id="toc-variables-management" class="nav-link" data-scroll-target="#variables-management">Variables Management</a></li>
  <li><a href="#plots-in-stata" id="toc-plots-in-stata" class="nav-link" data-scroll-target="#plots-in-stata">Plots in Stata</a>
  <ul class="collapse">
  <li><a href="#scatter-plot" id="toc-scatter-plot" class="nav-link" data-scroll-target="#scatter-plot">Scatter plot</a></li>
  </ul></li>
  <li><a href="#saving-your-work" id="toc-saving-your-work" class="nav-link" data-scroll-target="#saving-your-work">Saving your work</a></li>
  <li><a href="#estimation-commands" id="toc-estimation-commands" class="nav-link" data-scroll-target="#estimation-commands">Estimation Commands</a></li>
  <li><a href="#adv-options-for-saving-work." id="toc-adv-options-for-saving-work." class="nav-link" data-scroll-target="#adv-options-for-saving-work.">Adv options for saving work.</a></li>
  </ul></li>
  <li><a href="#thank-you" id="toc-thank-you" class="nav-link" data-scroll-target="#thank-you">Thank you!</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Stata-Basics</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>

<section id="get-to-know-stata" class="level1">
<h1>Get to know <code>Stata</code></h1>
<p><img src="images/paste-1.png" class="img-fluid"></p>
<section id="command-window" class="level2">
<h2 class="anchored" data-anchor-id="command-window">Command Window</h2>
<ul>
<li>You can use command window to type and excute commands directly into <code>Stata</code>.</li>
<li>Great for interactive exploration and analysis…</li>
<li>But highly recommended that Final analysis is “always” done in a “do-file”</li>
</ul>
<div id="e249ee84" class="cell" data-execution_count="1">
<div class="cell-output cell-output-stdout">
<pre><code>
. display "Hola"
Hola

. display "2+2=" 2+2
2+2=4

. display "The probability that z &gt;1.95 is " %5.3f 1-normal(1.95)
The probability that z &gt;1.95 is 0.026

. </code></pre>
</div>
</div>
</section>
<section id="help" class="level2">
<h2 class="anchored" data-anchor-id="help">Help</h2>
<ul>
<li>99% of Stata commands come with Extensive help.</li>
<li>If you do not know how to use a command, or about a test just “ask for help”</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">help</span> <span class="kw">help</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>[R] <span class="kw">help</span> -- Display <span class="kw">help</span> <span class="kw">in</span> Stata</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>-------------------------------------------------------------------------------</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>Stata's <span class="kw">help</span> system</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    There are several kinds <span class="kw">of</span> <span class="kw">help</span> available to the Stata user. For <span class="kw">more</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    information, see Advice <span class="kw">on</span> getting <span class="kw">help</span>.  The information below is</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    technical details about Stata's <span class="kw">help</span> command.</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>-------------------------------------------------------------------------------</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>Syntax</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">help</span> [command_or_topic_name] [, nonew <span class="bn">name</span>(viewername)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>              marker(markername)]</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>Menu</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    Help &gt; Stata command...</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>Description</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    The <span class="kw">help</span> command displays <span class="kw">help</span> information about the specified command <span class="kw">or</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    topic.  <span class="kw">help</span> launches a <span class="kw">new</span> Viewer to <span class="kw">display</span> <span class="kw">help</span> <span class="kw">for</span> the specified</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    command <span class="kw">or</span> topic <span class="kw">or</span> displays <span class="kw">help</span> <span class="kw">on</span> the <span class="kw">console</span> <span class="kw">in</span> Stata <span class="kw">for</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    Unix(<span class="kw">console</span>).  If <span class="kw">help</span> is <span class="kw">not</span> followed <span class="kw">by</span> a command <span class="kw">or</span> a topic <span class="bn">name</span>,</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    Stata displays advice <span class="kw">for</span> <span class="kw">using</span> the <span class="kw">help</span> system and documentation.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For estimation commands, and specialized tests, <code>help</code> even provides links to the manuals.</p>
<p>The manuals have extensive detailed information on methods, formulas, references, and examples.</p>
<p><img src="images/paste-2.png" class="img-fluid"></p>
<ul>
<li><p>Of course there is 1% that is “documented/undocumented” or truly undocumented.</p></li>
<li><p>Most Community-contributed commands also have helpfiles, but are not always fully documented.</p></li>
<li><p>You could also ask for helps on “topics”: <code>help sample selection</code></p></li>
</ul>
</section>
<section id="installing-programs" class="level2">
<h2 class="anchored" data-anchor-id="installing-programs">Installing Programs</h2>
<ul>
<li><code>Stata</code>, for all practical purposes, is self-contained.
<ul>
<li>You do not need outside sources to analyze your data, estimate models, create tables, etc.</li>
</ul></li>
<li>However, many users provide add-ons that may help to make your work “easier”
<ul>
<li>Main Stata repository : Boston College Statistical Software Components (<strong>SSC</strong>) archive</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>** For <span class="kw">using</span> Wooldridge Book Datasets</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">ssc</span> install frause, <span class="kw">replace</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>** For Easiy tables</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>net install estout, <span class="kw">replace</span> from(https:<span class="co">//raw.githubusercontent.com/benjann/estout/master/)</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>** My own installer <span class="kw">for</span> extra utilities</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>net install fra, <span class="kw">replace</span> from(https:<span class="co">//friosavila.github.io/stpackages) </span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>fra install fra_tools, <span class="kw">replace</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>If at any point there is code that produces an error, and there is no <code>help</code>, let me know.</li>
</ul>
</section>
<section id="loading-data" class="level2">
<h2 class="anchored" data-anchor-id="loading-data">Loading Data</h2>
<ul>
<li><code>Stata</code> Files have format <strong>dta</strong>.</li>
<li>Loading Stata-data into <code>Stata</code> is very easy.
<ul>
<li>Double-click (opens a new <code>Stata</code>)</li>
<li>Drag and Drop into your <code>Stata</code> instance</li>
<li>Load it from menu File&gt;open</li>
<li>or using a do-file or command window</li>
</ul></li>
<li>Other Formats required extra work.
<ul>
<li>Use other software to “translate” it into Stata</li>
<li>Menu: File&gt;import&gt; many choices</li>
</ul></li>
</ul>
<section id="stata-system-files" class="level3">
<h3 class="anchored" data-anchor-id="stata-system-files">Stata System-files</h3>
<div id="357919ce" class="cell" data-execution_count="2">
<div class="cell-output cell-output-stdout">
<pre><code>
. ** Most Stata example files
. ** Syntax:   sysuse  [filename], [clear]
. sysuse dir
  abortion.dta    citytemp.dta    nlsw88.dta      titanic.dta
  auto.dta        citytemp4.dta   nlswide1.dta    tsline1.dta
  auto16.dta      educ99gdp.dta   oaxaca.dta      tsline2.dta
  auto2.dta       gapminder.dta   pop2000.dta     uslifeexp.dta
  autornd.dta     gnp96.dta       ri.dta          uslifeexp2.dta
  avocado.dta     lifeexp.dta     sandstone.dta   voter.dta
  bplong.dta      mortgages.dta   scorecard.dta   xtline1.dta
  bpwide.dta      mroz.dta        snow.dta        yule.dta
  cancer.dta      network1.dta    sp500.dta
  castle.dta      network1a.dta   surface.dta
  census.dta      nhefs.dta       texas.dta

. </code></pre>
</div>
</div>
</section>
<section id="other" class="level3">
<h3 class="anchored" data-anchor-id="other">Other</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>** Web <span class="kw">data</span> from Stata</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">webuse</span> <span class="st">"data-file-address"</span>, <span class="kw">clear</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>** From other sites</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="kw">webuse</span> <span class="kw">set</span> [webaddress]</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="kw">webuse</span> <span class="kw">data</span>-file-address, <span class="kw">clear</span> </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="kw">webuse</span> <span class="kw">set</span> </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>** from frause and Wooldrige</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>frause , <span class="ot">dir</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>frause wage1, <span class="kw">clear</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>** from anyadress</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> <span class="st">"filename-adress"</span>, <span class="kw">clear</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> <span class="st">"https://friosavila.github.io/playingwithstata/data2/wage1.dta"</span>, <span class="kw">clear</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="basic-data-description" class="level2">
<h2 class="anchored" data-anchor-id="basic-data-description">Basic Data description</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">sysuse</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">webuse</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">frause</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div id="503510e2" class="cell" data-execution_count="3">
<div class="cell-output cell-output-stdout">
<pre><code>
. sysuse auto, clear
(1978 automobile data)

. des

Contains data from C:\Program Files\Stata17/ado\base/a/auto.dta
 Observations:            74                  1978 automobile data
    Variables:            12                  13 Apr 2020 17:45
                                              (_dta has notes)
-------------------------------------------------------------------------------
Variable      Storage   Display    Value
    name         type    format    label      Variable label
-------------------------------------------------------------------------------
make            str18   %-18s                 Make and model
price           int     %8.0gc                Price
mpg             int     %8.0g                 Mileage (mpg)
rep78           int     %8.0g                 Repair record 1978
headroom        float   %6.1f                 Headroom (in.)
trunk           int     %8.0g                 Trunk space (cu. ft.)
weight          int     %8.0gc                Weight (lbs.)
length          int     %8.0g                 Length (in.)
turn            int     %8.0g                 Turn circle (ft.)
displacement    int     %8.0g                 Displacement (cu. in.)
gear_ratio      float   %6.2f                 Gear ratio
foreign         byte    %8.0g      origin     Car origin
-------------------------------------------------------------------------------
Sorted by: foreign

. list in 1/3

     +------------------------------------------------------------------------+
  1. | make        | price | mpg | rep78 | headroom | trunk | weight | length |
     | AMC Concord | 4,099 |  22 |     3 |      2.5 |    11 |  2,930 |    186 |
     |------------------------------------------------------------------------|
     |     turn     |     displa~t     |     gear_r~o     |      foreign      |
     |       40     |          121     |         3.58     |     Domestic      |
     +------------------------------------------------------------------------+

     +------------------------------------------------------------------------+
  2. | make        | price | mpg | rep78 | headroom | trunk | weight | length |
     | AMC Pacer   | 4,749 |  17 |     3 |      3.0 |    11 |  3,350 |    173 |
     |------------------------------------------------------------------------|
     |     turn     |     displa~t     |     gear_r~o     |      foreign      |
     |       40     |          258     |         2.53     |     Domestic      |
     +------------------------------------------------------------------------+

     +------------------------------------------------------------------------+
  3. | make        | price | mpg | rep78 | headroom | trunk | weight | length |
     | AMC Spirit  | 3,799 |  22 |     . |      3.0 |    12 |  2,640 |    168 |
     |------------------------------------------------------------------------|
     |     turn     |     displa~t     |     gear_r~o     |      foreign      |
     |       35     |          121     |         3.08     |     Domestic      |
     +------------------------------------------------------------------------+

. </code></pre>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div id="979e5061" class="cell" data-execution_count="4">
<div class="cell-output cell-output-stdout">
<pre><code>
. webuse smoking, clear
(Smoking and mortality data)

. des

Contains data from https://www.stata-press.com/data/r17/smoking.dta
 Observations:        17,260                  Smoking and mortality data
    Variables:            16                  27 Dec 2020 15:21
                                              (_dta has notes)
-------------------------------------------------------------------------------
Variable      Storage   Display    Value
    name         type    format    label      Variable label
-------------------------------------------------------------------------------
serno           int     %10.0g                Serial number
cigs            byte    %10.0g                Daily cigarette consumption
sysbp           int     %10.0g                Systolic blood pressure (mm Hg)
diasbp          float   %10.0g                Diastolic blood pressure (mm Hg)
map             float   %9.0g                 Mean arterial pressure (mm Hg)
age             byte    %10.0g                Age (years)
ht              double  %10.0g                Height (cm)
wt              double  %10.0g                Weight (kg)
chol            double  %10.0g                Cholesterol (mmol/l)
gradd1          byte    %8.0g                 Job grade 1
gradd2          byte    %8.0g                 Job grade 2
gradd3          byte    %8.0g                 Job grade 3
all10           byte    %8.0g                 Ten year mortality
pyar            double  %10.0g                Years of follow-up
chd             byte    %10.0g                Censoring (0 = censored, 1 = died
                                                of CHD)
jobgrade        byte    %10.0g                Job grade
-------------------------------------------------------------------------------
Sorted by: 

. list cigs map age ht gradd1 in 1/3

     +-----------------------------------------+
     | cigs        map   age       ht   gradd1 |
     |-----------------------------------------|
  1. |    0         97    46   154.94        0 |
  2. |    0   97.66666    55   179.07        1 |
  3. |    0         82    43   173.99        1 |
     +-----------------------------------------+

. </code></pre>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div id="726af824" class="cell" data-execution_count="5">
<div class="cell-output cell-output-stdout">
<pre><code>
. frause smoking, clear
(A.C.Cameron &amp; P.K.Trivedi (2022): Microeconometrics Using Stata, 2e)

. des

Contains data from https://friosavila.github.io/playingwithstata/data2/smoking.
&gt; dta
 Observations:         1,209                  A.C.Cameron &amp; P.K.Trivedi
                                                (2022): Microeconometrics Using
                                                Stata, 2e
    Variables:             7                  5 Oct 2022 13:08
-------------------------------------------------------------------------------
Variable      Storage   Display    Value
    name         type    format    label      Variable label
-------------------------------------------------------------------------------
state           byte    %14.0g     state      State no
year            int     %9.0g                 Year
cigsale         float   %9.0g                 Cigarette sale per capita (in
                                                packs)
lnincome        float   %9.0g                 Log state per capita GDP
beer            float   %9.0g                 Beer consumption per capita
age15to24       float   %9.0g                 Percent of state population aged
                                                15–24 years
retprice        float   %9.0g                 Retail price of cigarettes
-------------------------------------------------------------------------------
Sorted by: year

. list in 1/3

     +-----------------------------------------------------------------------+
     |        state   year   cigsale   lnincome   beer   age15~24   retprice |
     |-----------------------------------------------------------------------|
  1. | Rhode Island   1970     123.9          .      .   .1831579       39.3 |
  2. |    Tennessee   1970      99.8          .      .   .1780438       39.9 |
  3. |      Indiana   1970     134.6          .      .   .1765159       30.6 |
     +-----------------------------------------------------------------------+

. </code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="summary-statistics" class="level2">
<h2 class="anchored" data-anchor-id="summary-statistics">Summary Statistics</h2>
<ul>
<li>Summary Statistics are essential before starting basic analysis. <code>Stata</code> gives you many options. Although not all of them are easy to export.</li>
</ul>
<div id="1ded4279" class="cell" data-execution_count="6">
<div class="cell-output cell-output-stdout">
<pre><code>
. frause oaxaca, clear
(Excerpt from the Swiss Labor Market Survey 1998)

. *summarize [varlist] [if] [in] [weight] [, options]
. summarize if female==1, sep(0)

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
      lnwage |        683    3.266761    .5700236    .507681   5.259097
        educ |        888    11.06025     2.26024          5       17.5
       exper |        683    12.13769     8.32663          0   41.91667
      tenure |        683    6.605051    6.727475          0   40.08333
        isco |        683    3.920937    1.762983          1          9
      female |        888           1           0          1          1
         lfp |        888    .7691441    .4216179          0          1
         age |        888    39.88401    10.72665         18         62
       agesq |        888    1705.666    879.4667        324       3844
      single |        888    .3018018    .4592984          0          1
     married |        888    .5236486    .4997219          0          1
    divorced |        888    .1745495    .3797953          0          1
       kids6 |        888     .286036    .6726639          0          4
     kids714 |        888        .375    .7538888          0          4
          wt |        888    .9883364    .4030975   .5302977   3.181786

. </code></pre>
</div>
</div>
<div id="9cb70476" class="cell" data-execution_count="7">
<div class="cell-output cell-output-stdout">
<pre><code>
. *   tabstat varlist [if] [in] [weight] [, options]
. tabstat educ exper tenure age married, by(female)

Summary statistics: Mean
Group variable: female (sex of respondent (1=female))

  female |      educ     exper    tenure       age   married
---------+--------------------------------------------------
       0 |   11.8004  14.07684  9.003107  38.51647  .5230567
       1 |  11.06025  12.13769  6.605051  39.88401  .5236486
---------+--------------------------------------------------
   Total |  11.40134  13.15324  7.860937  39.25379  .5233758
------------------------------------------------------------

. tabstat educ exper tenure , by(female) stats(p10 p50 p90)

Summary statistics: p10, p50, p90
Group variable: female (sex of respondent (1=female))

  female |      educ     exper    tenure
---------+------------------------------
       0 |      10.5  1.416667  .4166667
         |      10.5  11.08333      6.25
         |      17.5  31.33333     23.25
---------+------------------------------
       1 |         9      2.25  .3333333
         |      10.5     10.75      4.25
         |      12.5    23.375     15.75
---------+------------------------------
   Total |         9  1.833333  .4166667
         |      10.5  10.91667  5.291667
         |        15  28.08333  19.41667
----------------------------------------

. </code></pre>
</div>
</div>
<div id="c04a7742" class="cell" data-execution_count="8">
<div class="cell-output cell-output-stdout">
<pre><code>
. ssc install table1
checking table1 consistency and verifying not already installed...
all files already exist and are up to date.

. * see help table1
. table1, by(female) vars(lnwage contn %3.2f \ age contn %2.1f \ married bin)
  +--------------------------------------------------------------------+
  | Factor                         female = 0    female = 1    p-value |
  |--------------------------------------------------------------------|
  | N                              759           888                   |
  |--------------------------------------------------------------------|
  | log hourly wages, mean (SD)    3.44 (0.48)   3.27 (0.57)    &lt;0.001 |
  |--------------------------------------------------------------------|
  | age of respondent, mean (SD)   38.5 (11.3)   39.9 (10.7)     0.012 |
  |--------------------------------------------------------------------|
  | married                        397 (52.3%)   465 (52.4%)      0.98 |
  +--------------------------------------------------------------------+

. qui:table1, by(female) vars(lnwage contn %3.2f \ age contn %2.1f \ married bi
&gt; n) saving(m1.xls)
file m1.xls already exists
r(602);</code></pre>
</div>
</div>
<p>You can see the file <a href="m1.xls">here</a></p>
<ul>
<li><p>There are other options from <code>Stata</code> as well. see <code>help dtable</code> and <code>help table</code>.</p></li>
<li><p>Or you could construct some yourself with the help of <code>estout</code> and <code>esttab</code>.</p></li>
<li><p>See <a href="https://grodri.github.io/stata/tables">here</a> for a quick guide on tables.</p></li>
</ul>
</section>
<section id="creating-variables" class="level2">
<h2 class="anchored" data-anchor-id="creating-variables">Creating variables</h2>
<ul>
<li>Two main commands:
<ul>
<li><code>generate</code> (or <code>gen</code> for short): Creates new variables as a function of others in the data. One can apply system functions. Example:
<ul>
<li><code>gen var1 = 1</code></li>
<li><code>gen var2 = _n</code></li>
<li><code>gen wage = exp(lnwage)</code></li>
<li><code>gen age_educ = age * educ</code></li>
</ul></li>
<li><code>replace</code>: replaces values in an already existing variable.
<ul>
<li><code>replace wage = 0 if wage==.</code></li>
<li><code>replace age_educ = . if female==1</code></li>
</ul></li>
<li><code>egen</code>: Advanced variable generating function. It applies a single function to a variable or list of variables to create a third one.
<ul>
<li><code>egen wage_mean=mean(exp(lnwage)), by(female)</code></li>
<li><code>egen wage_p10=pctile(lnwage), by(female) p(10)</code></li>
</ul></li>
</ul></li>
<li>To <em>delete</em> a variable, you can use <code>drop varname/varlist</code> or <code>drop2 varname/varlist</code>
<ul>
<li><code>drop</code> is the official. Stops if the variable does not exist.</li>
<li><code>drop2</code> an addon. Will still work even if a variable name does not exist.<br>
Requires using full variable name.</li>
</ul></li>
</ul>
<div id="c0bcb3bd" class="cell" data-execution_count="9">
<div class="cell-output cell-output-stdout">
<pre><code>
. gen var1 = exp(lnwage)
(213 missing values generated)

. gen xar2 = exp(lnwage)+married
(213 missing values generated)

. drop x

. des var1 xar2
variable xar2 not found
r(111);</code></pre>
</div>
</div>
<div id="efeec6e7" class="cell" data-execution_count="10">
<div class="cell-output cell-output-stdout">
<pre><code>
. gen xar2 = exp(lnwage)+married
(213 missing values generated)

. drop2 x
variable x not found

. </code></pre>
</div>
</div>
</section>
<section id="variables-management" class="level2">
<h2 class="anchored" data-anchor-id="variables-management">Variables Management</h2>
<ul>
<li><code>Stata</code> is case sensitive.
<ul>
<li>You can create variables with names <code>one</code>, <code>One</code>, <code>OnE</code>, <code>ONE</code>, etc.</li>
<li>“file addresses” and commands are also case sensitive</li>
</ul></li>
<li>In <code>Stata</code>, variable names <strong><em>cannot</em></strong> can only start with a letter or “_“. Otherwise, it will give you an error.</li>
<li>Once variables are created, you could “label” them<br>
<code>label var variable_name "Description"</code></li>
<li>You can name other components of a dataset as well. See <code>help label</code></li>
</ul>
</section>
<section id="plots-in-stata" class="level2">
<h2 class="anchored" data-anchor-id="plots-in-stata">Plots in Stata</h2>
<ul>
<li><code>Stata</code> can create figures and plots for data exploration</li>
</ul>
<section id="scatter-plot" class="level3">
<h3 class="anchored" data-anchor-id="scatter-plot">Scatter plot</h3>
<div id="4961e0b7" class="cell" data-execution_count="11">
<div class="cell-output cell-output-stdout">
<pre><code>
. webuse dui, clear
(Fictional data on monthly drunk driving citations)

. scatter citations fines

. </code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Stata_Basics_files/figure-html/cell-12-output-2.png" class="img-fluid"></p>
</div>
</div>
<div id="75815d0e" class="cell" data-execution_count="12">
<div class="cell-output cell-output-stdout">
<pre><code>
. two (scatter citations fines if csize==1)  ///
&gt;     (scatter citations fines if csize==2), ///
&gt;     legend(order(1 "Small" 2 "Medium"))

. </code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Stata_Basics_files/figure-html/cell-13-output-2.png" class="img-fluid"></p>
</div>
</div>
<ul>
<li>The limitation. User written plotting commands do not interact well with Official plotting commands.</li>
</ul>
</section>
</section>
<section id="saving-your-work" class="level2">
<h2 class="anchored" data-anchor-id="saving-your-work">Saving your work</h2>
<ul>
<li><p>Command Window is effective to provide interactive analysis</p></li>
<li><p>At the end of your <em>session</em>, you can recover everything you did, clicking on the History Section, and save everythig, or just specific commands.</p></li>
<li><p>The best approach, however, is to <strong><em>ALWAYS</em></strong> use a do-file.</p></li>
<li><p><strong>First of all</strong>: Create a working directory. A folder in your computer that will hold your project, work, paper, homework, etc. (highly recommended)</p></li>
<li><p><strong>Create a dofile</strong>: For simple projects a single file will suffice, but multiple may be needed for larger ones.</p></li>
<li><p>To start a dofile, simply type <code>doedit "filename"</code> in your command window.</p>
<ul>
<li>If file exists in your “working directory” (type <code>cd</code> to see where you “are”), it will open it.</li>
<li>Otherwise, a new file will be created</li>
</ul></li>
<li><p><code>do-files</code> are the best approach to save your work, and keep track of your analysis.</p></li>
<li><p>General Suggestion: Allways add comments to it, to know what you are doing</p></li>
</ul>
<div id="95ad2c4e" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>*  You can always Start a command like <span class="kw">this</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Or like this</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co">But you can always add a large comment using "/*" to start</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co">and "*/</span><span class="st">" to end it</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="st">*/</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="st">/* You could also add comments at the end of a command */</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="st">sysuse auto, clear  // Loading Auto Dataset, after "</span>clearing<span class="st">" the one currently in memory</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="st">// Or as I did before, break a long command in various lines using "</span><span class="co">///"</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="co">// Comments after "///" are possible</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="kw">regress</span> price     <span class="co">/// Dep variable</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>        mpg       <span class="co">/// indep variable </span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>        i.foreign, <span class="co">/// Foreign Dummy</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>        <span class="kw">robust</span>     <span class="co">// Request Robust Standard errors.</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>** Last one has only <span class="kw">two</span> <span class="st">"/"</span>, because <span class="kw">line</span> <span class="fu">ends</span> there</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(1978 automobile data)

Linear regression                               Number of obs     =         74
                                                F(2, 71)          =      12.72
                                                Prob &gt; F          =     0.0000
                                                R-squared         =     0.2838
                                                Root MSE          =     2530.9

------------------------------------------------------------------------------
             |               Robust
       price | Coefficient  std. err.      t    P&gt;|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
         mpg |  -294.1955   60.33645    -4.88   0.000     -414.503   -173.8881
             |
     foreign |
    Foreign  |   1767.292   607.7385     2.91   0.005     555.4961    2979.088
       _cons |   11905.42   1362.547     8.74   0.000     9188.573    14622.26
------------------------------------------------------------------------------</code></pre>
</div>
</div>
</section>
<section id="estimation-commands" class="level2">
<h2 class="anchored" data-anchor-id="estimation-commands">Estimation Commands</h2>
<ul>
<li>Most commands in <code>Stata</code> have the following syntax:</li>
</ul>
<pre><code>[by varlist:/prefix] command [varlist]  [if exp] [in range] [weight] [using filename] [,options]</code></pre>
<ul>
<li>everything in <code>[]</code> are optional.</li>
<li><code>[by varlist:/prefix]</code>: <code>by</code> is used to execute the command by groups.<br>
<code>prefix</code> to request additional manipulation (advanced use)</li>
<li><code>command</code>: The command itself that will process the data</li>
<li><code>varlist</code>: For Estimation commands include the dependent (first) and independent variables (everything else)</li>
<li><code>[if exp] [in range]</code>: To restrict samples</li>
<li><code>[weight]</code>: Request the use of weights ie: <code>[fw = wgt_var]</code> or <code>[pw = wgt_var]</code></li>
<li><code>[using filename]</code>: Some commands allow you to use this to work with not-yet loaded datasets or files.</li>
<li><code>[options]</code>: Options requesting specific behaivior, statistics, etc</li>
</ul>
</section>
<section id="adv-options-for-saving-work." class="level2">
<h2 class="anchored" data-anchor-id="adv-options-for-saving-work.">Adv options for saving work.</h2>
<ul>
<li>Use <code>github</code>, as an additional data-repository</li>
<li>Combine <code>Stata</code>, <code>python</code> and <code>nbstat</code> to create <code>Jupyter notebooks</code>.</li>
<li>You can also use Quarto to create full dynamic reports.</li>
</ul>
</section>
</section>
<section id="thank-you" class="level1">
<h1>Thank you!</h1>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        for (let i = 0; i < 2; i++) {
          container.appendChild(note.children[i].cloneNode(true));
        }
        return container.innerHTML
      } else {
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>