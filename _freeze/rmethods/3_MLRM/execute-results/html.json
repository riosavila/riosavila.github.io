{
  "hash": "d2692115db635aa092d140628364f652",
  "result": {
    "markdown": "---\ntitle: 'Multiple Regression Analysis: Estimation'\ntitle-slide-attributes:\n  data-background-image: images/paste-4.png\n  data-background-size: contain\n  data-background-opacity: '0.5'\nsubtitle: The first tool of Many\nauthor: Fernando Rios-Avila\nformat:\n  revealjs:\n    slide-number: true\n    width: 1500\n    height: 900\n    code-fold: true\n    echo: true\n    css: styles.css\n---\n\n## Why stay with 1 when you can use Many? ... Why not?\n\n- The SLRM we cover last week is a powerful tool to understand the mechanics behind regression analysis, however is too limited.\n  - Use one control? to fix everything ?! \n- The Natural alternative is to relax the assumption and Make things more flexible. \n  - In other words...Allow for adding More controls\n  \nThus, instead of:\n$$y_i = \\beta_0 + \\beta_1 x_i + e_i\n$$\n\nwe have to consider:\n\n$$y_i = \\beta_0 + \\beta_1 x_{1i} +\\beta_2 x_{2i} + \\dots + \\beta_k x_{ki} + u_i\n$$\n\nHow many can we add? and why does it help?\n\n## The power of MLR: Why do more controls help?\n\n1. One more explicitly accounts for variables that before were *hidden* in $e_i$.\n   $x_{2i},x_{3i},\\dots,x_{ki} \\rightarrow$ Model not $u_i$\n   *ceteris paribus*\n2. Allows for richer model specifications and nonlinearities:\n   \n   Before: $y_i = \\beta_0 + \\beta_1 x_{1i} + e_i$\n\n   Now   : $y_i = \\beta_0 + \\beta_1 x_{1i} +\\beta_2 x^2_{1i} + \\beta_3 x^{1/2}_{1i} + \\beta_4 x^{-1}_{1i} + \n   \\beta_5 x_{2i}+\\dots+e_i$\n\nThus, we can get closer to the unknown Population function, and explicitly handle *some* endogeneity problems (we control for it).\n\n:::{.callout-caution}\n\n## With great power...\n\nBeing able to add more controls is good, but:\n\n  - May make things worse (bad controls)\n  - Or might not be feasible (small Sample)\n  - Or may be difficult to interpret (unless you know how to)\n:::\n\n# Do assumptions change?\nNot really, but lets make some math changes:\n\n$$y=\\begin{bmatrix}y_1 \\\\ y_2 \\\\ \\vdots \\\\ y_n\n\\end{bmatrix} \n; \nX=\\begin{bmatrix}x_1' \\\\ x_2' \\\\ \\vdots \\\\ x_n'\n\\end{bmatrix} = \\begin{bmatrix} 1 & x_{11} & x_{21} & \\dots &  x_{k1} \n\\\\ 1 & x_{12} & x_{22} & \\dots &  x_{k2} \n\\\\ \\vdots & \\vdots  & \\vdots & \\ddots & \\vdots\n\\\\ 1 & x_{1n} & x_{2n} & \\dots &  x_{kn} \n\\end{bmatrix};\n\\beta =\\begin{bmatrix} \\beta_0 \\\\ \\beta_1 \\\\ \\beta_2 \\\\ \\vdots \\\\ \\beta_k \n\\end{bmatrix}; e=\\begin{bmatrix}e_1 \\\\ e_2 \\\\ \\vdots \\\\ e_n\n\\end{bmatrix} \n $$\n\n$$y=X\\beta + e\n$$\n\n## Mostly the same\n\n1. **Linear in Parameters**: $y = X\\beta + e$ (And this is the pop function)\n2. **Random Sampling** from the population of interest. (So errors $e_i$ is independent from $e_j$)\n3. **No Perfect Collinearity**:\n   \n   This is the alternative to $Var(x)>0$ (SLRM), and deserves more attention.\n\n- We want each variable in $X$ to have [***some***]{.bluetxt} independent variation, from all other variables in the model.\n  - In the SLRM, the independent variation idea was with respect to the constant.\n- [**If**]{.redtxt} a variable was a linear combination of others, then $\\beta's$ cannot be identified. You need to choose what to keep:\n$$\\begin{aligned}\ny &= \\beta_0 + \\beta_1 X_1 + \\beta_2 X_2 + \\beta_3 (X_1+X_2) + e \\\\ \n&=  \\beta_0 + (\\beta_1+\\beta_3) X_1 + (\\beta_2+\\beta_3) X_2 + e  \n\\end{aligned}\n$$\n\n## \n\n4. **Zero Conditional mean** (Exogeneity): $E(e_i|X)=0$ \n   \n   Requires that the errors and the explanatory variables are uncorrelated. This is \"easier\" to achieve, because we can now move variables form the error to the model.\n\n   However, there could be things you can't controls for (and remain lurking in your errors)\n\n> I call this the most important assumption, because is the hardest to deal with\n\n#### If A1-A4 Hold, then your estimates will be unbiased! \n\n5. **Homoskedasticity** Same as before. Errors dispersion does not change with respect to **all** $X's$.\n$$Var(e|X)=c\n$$\n\nJust as with SLRM, this assumption will help with the estimation of Standard Errors.\n\n## MLRM estimation \n\nAs before, not much has changed. We are still interested in finding $\\beta's$ that Minimizes the (squared) error of the model when compared to the observed data:\n\n$$\\hat \\beta = \\min_\\beta \\sum (y_i-X_i'\\beta)^2 = \\min_\\beta \\sum (y_i-\\beta_0-\\beta_1 x_{1i}-\\dots-\\beta_k x_{ki})^2\n$$\n\nThe corresponding FOC generate $K+1$ equations to identify $K+1$ parameters:\n\n$$\\begin{aligned}\n\\sum (y_i-X_i'\\beta) &= 0  \\\\\n\\sum x_{1i}(y_i-X_i'\\beta) &= 0 \\\\\n\\sum x_{2i}(y_i-X_i'\\beta) &= 0 \\\\ \\dots \\\\\\\n\\sum x_{ki}(y_i-X_i'\\beta) &= 0 \n\\end{aligned} \\rightarrow X'(y-X\\beta) =0 \\rightarrow \\hat \\beta = (X'X)^{-1}X'y\n$$\n\n## `mata` Interlute (for those curious){.scrollable}\n\n::: {#ef83e8b0 .cell .larger execution_count=1}\n``` {.stata .cell-code}\nfrause gpa1, clear\ngen one =1 \nmata: y=st_data(.,\"colgpa\"); mata: x=st_data(.,\"hsgpa act one\")\nmata: xx=x'x ; ixx=invsym(xx) ; xy = x'y \nmata: b = ixx * xy ; b\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                 1\n    +---------------+\n  1 |  .4534558853  |\n  2 |  .0094260123  |\n  3 |  1.286327767  |\n    +---------------+\n```\n:::\n:::\n\n\n## You got the $\\beta's$, how do you interpret them?\n\nInterpretation of MLRM is similar to the SLRM. For **most** cases, you simply look into the coefficients, and interpret effects in terms of Changes:\n\n$$\\begin{aligned}\ny_i = \\hat\\beta_0 + \\hat\\beta_1 x_{1i}  + \\hat\\beta_2 x_{2i} + e_i \\\\\n\\Delta y_i =  \\hat\\beta_1 \\Delta  x_{1i}  + \\hat\\beta_2 \\Delta  x_{2i} + \\Delta e_i\n\\end{aligned}\n$$\n\nUnder A1-A5 I can make use the above to make interpretations\n\n1. $\\hat \\beta_0$ has no effect on \"changes\" of $y$. Only its levels.\n2. $\\hat \\beta_1$ indicates how much $\\Delta y_i$ will be if $\\Delta x_{1i}$ increases in 1 unit, if both $\\Delta x_{2i}$ and $\\Delta e_i$ remain constant (*Ceteris Paribus*)\n\n$\\Delta e_i=0$ by assumption, and $\\Delta x_{2i}=0$ becuse we are explicilty controlling for it (We impute this based on extrapolations)\n\nYou could also analyze the effect of $\\Delta x_{1i}$ and $\\Delta x_{2i}$ Simultaneously!\n\n## Example\n\n``` {.stata .cell-code}\nqui: frause wage1, clear\nqui: reg lwage educ exper tenure\nlocal b0:display %5.3f _b[_cons]\nlocal b1:display %5.3f _b[educ]\nlocal b2:display %5.3f _b[exper]\nlocal b3:display %5.3f _b[tenure]\ndisplay \"\\$log(wage) = `b0' + `b1' educ + `b2' exper + `b3' tenure$\"\n```\n$log(wage) = 0.284 + 0.092 educ + 0.004 exper + 0.022 tenure$\n\n\n$\\beta_0$ has no effect on changes, but level. If someone has no education, experience or tenure, log(wages) will be 0.284. (why not estimate Wages?)\n\n$\\beta_1$ : An additional year of education increases wages in 0.092log points or about 9.2%, if Experience and tenure do nor change (ceteris paribus).\n\nNotes:\n\n1. Think of Interpretations as comparing someone's outcome to him/herself: $y_{post} - y_{pre}$ \n2. We make a more explicit assumption other factors (not under observation) SHOULD remain fixed (is it always credible?? $y=b_0 + b_1 x + b_2 x^2 + e$) \n   \n3. You could combine effects. How much more would wages be if a person gains 1 year of education but losses 3 of tenure?\n\n## More on Interpretation\n\nUnder A1-A5, you can still interpret results as \"counterfactual\" at the individual level. However, its more common to do it based on Conditional means:\n\n$$\\frac {\\Delta E(y|X)}{\\Delta X_k} \\simeq E(y|X_{-k},X_k+1)-E(y|X)\n$$\n\nWhich mostly changes Language.\n\n> The expected effect of an increase in $X$ in one unit.\n\n## Alternative Interpretation: *Partialling out*\n\n",
    "supporting": [
      "3_MLRM_files"
    ],
    "filters": [],
    "includes": {}
  }
}